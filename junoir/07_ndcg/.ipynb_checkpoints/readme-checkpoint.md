### Cumulative Gain
Постфикс @k присутствует во многих метриках связанных с рекомендательными системами. 

Как правило, на реальных данных у нас сотни или миллионы данных о товарах, фильмах или других объектах, рекомендательная система может ранжировать такие объемы


- Ранжирование – сортировка документов в соответствии с их релевантностью запроса. 

В нашем случае, запросом выступает вопрос студента, а документом – рекомендованное к просмотру видео.

- Релевантность – соответствие рекомендованного видео к вопросу студента.
В дальнейшем под релевантностью мы будем понимать экспертную оценку от 0.0 до 1.0.

nDCG (Normalized Discounted Cumulative Gain) – популярная метрика в задаче ранжирования, которая учитывает порядок элементов в выдаче. Мы поэтапно разберёмся, что означает каждая буква в данной аббревиатуре, одну за другой реализовав метрики CG, DCG и nDCG.  
![alt text](https://github.com/vetak8/ml_sim/blob/main/junoir/07_ndcg/ранжирование.png)

Мы должны сильно штрафовать его релевантность при суммировании. 
### Discounted Cumulative Gain
Здесь на помощь приходит метрика DCG.

Суть её довольно проста: давайте будем добавлять штраф к релевантности если важный документ попал в конец списка или добавлять вес если этот документ попал в начало списка выдачи.  

Есть 2 варианта DCG в зависимости от штрафующего знаменателя: Standard и Industry.

Standard – штраф релевантности на вес, равный логарифму номера позиции в выдаче

Industry – этот метод экспоненциально увеличивает релевантность, таким образом если в выдаче достаточно много значений релевантность которых близка к 1, в отличие от метода `standard`, метрика будет адекватно учитывать такую выдачу.

### Normalized Discounted Cumulative Gain

Теперь, что бы получить nDCG (Normalized Discounted Cumulative Gain) достаточно поделить DCG на IDCG, а метрика станет нормированной от 0 до 1.  
### Average Normalized Discounted Cumulative Gain

Average nDCG - усредненное значение метрики nDCG по каждому запросу из множества.